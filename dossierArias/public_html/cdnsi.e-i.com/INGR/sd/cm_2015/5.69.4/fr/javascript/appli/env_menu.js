!function(e){function n(n,i){if(n){e("html").addClass("noscroll");var t;e("body").on("touchstart",function(e){t=e.originalEvent.touches[0].clientY}),e("body").on("touchmove",function(n){if(e(n.target).parents(i).length>0){var l=!1;if(e(i).scrollTop()+e(i).innerHeight()<e(i).prop("scrollHeight")?l=!0:e(i).scrollTop()>0&&t<n.originalEvent.touches[0].clientY&&(l=!0),t=n.originalEvent.touches[0].clientY,l)return}n.preventDefault(),n.stopPropagation()})}else e("html").removeClass("noscroll"),e("#ei_tpl_fullsite").removeClass("pfixed"),e("body").off("touchmove"),e("body").off("touchstart")}e.fn.ei_menuMobil=function(i){function t(n,i){var t=e(n).parent();e(t).hasClass("e_menu_srub_open")?(e(t).removeClass("e_menu_srub_open"),e(t).find(".e_smenu").slideUp(i)):(e(t).addClass("e_menu_srub_open"),e(t).find(".e_smenu").slideDown(i))}var l=null,s=0,a=0,o=0;return this.cloneMenuMobile=function(){e("#ei_tpl_mMobPrincipal").html(e("#ei_tpl_menuPrincipal").html())},this.resetMenuMobil=function(){_resetMenuMobil()},_resetMenuMobil=function(){e("#ei_tpl_fullsite").unbind("click"),e(l).hide(300,function(){e("html").removeClass("ei_tpl_menuMobil_open")}),n(!1,l),_menuMobil_deleateSmenu()},this.menuMobil_init=function(n){o=e("#ei_tpl_head").height(),s=e(window).height()-o,e("#ei_tpl_mMobPrincipal .e_smenu").css("margin-left","0!important");var i=e(l).find("nav ul li.e_menudepliant a:not(li.e_menudepliant li a)");e(i).hasClass("mob_link")||e(i).addClass("mob_link").click(function(n){var i=void 0!=e(this).parent().attr("id")?"id='"+e(this).parent().attr("id")+"'":"";return e("#ei_tpl_mMobPrincipal").width(a).after("<div id='ei_tpl_mMobSec' width='"+a+"px'><div class='"+e(this).parent().attr("class")+"' "+i+">"+e(this).parent().html()+"</div></div>"),e("#ei_tpl_mMobContent").width(2*a),e("#ei_tpl_mMobSec a:not(ul li a)").click(function(e){return _menuMobil_homeback(),!1}),e("#ei_tpl_mMobSec .e_menu_srub").each(function(){t(e(this),0)}),e("#ei_tpl_menuMobil").animate({scrollTop:0},300,"swing",function(){e("#ei_tpl_mMobContent").animate({left:"-="+a},300)}),!1})},_menuMobil_homeback=function(){e("#ei_tpl_mMobContent").animate({left:"0"},500,function(){_menuMobil_deleateSmenu()})},_menuMobil_deleateSmenu=function(){e("#ei_tpl_mMobContent").stop(!0,!0).width("").css("left",""),e("#ei_tpl_mMobPrincipal").width(""),e("#ei_tpl_mMobSec").remove()},this.menuMobil_bt=function(){e("#ei_tpl_menuLink a").click(function(i){return e("html").hasClass("ei_tpl_menuMobil_open")?_resetMenuMobil():(e(l).css("height",s).css("top",o),e(l).show(300,function(){e("html").addClass("ei_tpl_menuMobil_open"),a=e("#ei_tpl_mMobPrincipal").width()}),e("#ei_tpl_fullsite").click(function(e){_resetMenuMobil()}),n(!0,l)),!1})},this.each(function(){l=this})},e.fn.ei_menuDefault=function(n){function i(){var n=0;e(s).find(".e_menudepliant").each(function(){e(this).find("> a").attr("aria-controls","ei_mn_"+n),t(this,"close"),n++});var i=0;e(s).find(".e_menu_groupe").each(function(){var n="emgroupe_"+i;e(this).find("> a").attr("id",n),e(this).find(".e_smenu ul li > a").attr("aria-describedby",n),i++}),e("#ei_tpl_menuPrincipal > nav").prepend("<h2 class='invisible' tabindex='-1'>Menu</h2>"),e("#ei_tpl_menuPrincipal > nav li.e_menudepliant > a[href='#'], #ei_tpl_menuPrincipal > nav div.e_smenu li.e_menu_srub > a[href='#']").attr("role","presentation"),e("#ei_tpl_menuPrincipal > nav ul[role='menubar']").removeAttr("role"),e("#ei_tpl_menuPrincipal > nav ul[role='menu']").removeAttr("role"),e("#ei_tpl_menuPrincipal > nav a[role='menuitem']").removeAttr("role"),e("#ei_tpl_menuPrincipal > nav div.e_smenu[aria-hidden='true']").removeAttr("aria-hidden")}function t(n,i){var t="false";"open"==i&&(t="true"),e(n).find("> .e_smenu").attr("aria-expanded",t)}function l(){e(s).find("ul li a").attr("tabindex","-1"),e("#ei_tpl_menuPrincipal > nav a").first().attr("tabindex","0"),e(s).on("focus","li",function(){e(this).addClass("e_focus"),e(s).addClass("ei_menu_focus")}),e(s).on("blur","li",function(){e(this).removeClass("e_focus"),e(s).removeClass("ei_menu_focus")}),e(s).find("li").keydown(function(n){var i=e(".e_focus:last"),t=i.find(".e_smenu").first(),l=i.nextAll(":not(.e_menu_hidden, .e_menu_hidden *)").first(),s=i.prevAll(":not(.e_menu_hidden, .e_menu_hidden *)").first();switch(n.which){case 9:break;case 39:n.preventDefault(),n.stopPropagation(),i.parents(".e_menudepliant").length>0&&(l=(i=i.parents(".e_menudepliant")).nextAll(":not(.e_menu_hidden, .e_menu_hidden *)").first()),i.hasClass("e_menuinline")&&(l=i.find(" > .e_smenu > ul > li:not(.e_menu_hidden, .e_menu_hidden *)").first()),0==l.length&&(l=(i=e(".e_focus:first")).next()),l.find("a:visible").first().focus();break;case 37:n.preventDefault(),n.stopPropagation(),i.parents(".e_menudepliant").length>0&&(s=(i=i.parents(".e_menudepliant")).prevAll(":not(.e_menu_hidden, .e_menu_hidden *)").first()),s.hasClass("e_menuinline")&&(s=s.find(" > .e_smenu > ul > li:not(.e_menu_hidden, .e_menu_hidden *)").last()),0==s.length&&i.parents(".e_menuinline").length>0&&(s=i.parents(".e_menuinline").first()),s.hasClass("e_menuinline")&&s.prev()&&(s=s.prev()),s.find("a:visible").first().focus();break;case 40:n.preventDefault(),n.stopPropagation(),void 0!=(l=t.length>0&&t.find("a:visible").length>0?t.find('li:not(.e_menu_hidden, .e_menu_hidden *) a[href!="#"]:visible').first():void 0==(l=(a=i.parents(".e_menudepliant").find('li:not(.e_menu_hidden, .e_menu_hidden *) a[href!="#"]:visible'))[(o=a.index(i.find("a:visible").first()))+1])?a[0]:l)&&l.focus();break;case 38:if(n.preventDefault(),n.stopPropagation(),t.length>0&&t.find("a:visible").length>0)l=t.find('li:not(.e_menu_hidden, .e_menu_hidden *) a[href!="#"]:visible').first();else{var a=i.parents(".e_menudepliant").find('li:not(.e_menu_hidden, .e_menu_hidden *) a[href!="#"]:visible'),o=a.index(i.find("a:visible").first());l=void 0==(l=a[o-1])?a[a.length-1]:l}void 0!=l&&l.focus()}})}var s=null;return this.menuDefault_init=function(n){e(s).find(".e_menudepliant").hover(function(){return e(this).find(".e_smenu").addClass("smenu_open"),e("li.e_menuinline > a").css("z-index","1011"),t(this,"open"),e(s).hasClass("ei_menu_focus")&&(e(s).find("li").removeClass("e_focus"),e(s).removeClass("ei_menu_focus"),e(s).find("h2").eq(0).focus()),!1},function(){e(this).find(".e_smenu").removeClass("smenu_open"),t(this,"close"),e("li.e_menuinline > a").css("z-index","")}),e("body:not(.ei_tpl_conseil) #ei_tpl_menuPrincipal .e_menudepliant > .e_smenu").each(function(){var n="";e(this).parent().hasClass("e_smenucenter")&&(n=e(this).find(".e_menuCol1").length>0?".e_menuCol1 ":"");var i=e(this).find(n+"li:first").position(),t=e(this).find(n+"li:last").position(),l=Math.round(t.left-i.left);l>0&&e(this).width(l+270);var s=Math.round(-1*(e(this).width()/2-e(this).parent().width()/2+10));e(this).css("margin-left",s+"px");try{var a=Math.round(e("#ei_tpl_menuPrincipal #ei_m_accueil").offset().left-e(this).offset().left);a>0&&e(this).css("margin-left",Math.round(s+a)+"px")}catch(e){}}),e(".ei_tpl_conseil #ei_tpl_menuPrincipal .e_menudepliant > .e_smenu").each(function(){if(e(window).width()/2-Math.round(e(this).width()/2)<=e(this).parent().offset().left&&e(this).css("left","calc(50% - "+Math.round(e(this).width()/2)+"px)"),e(this).offset().left+e(this).width()<=e(this).parent().offset().left+e(this).parent().width()){var n=e(this).parent().offset().left+e(this).parent().width()-(e(this).offset().left+e(this).width());e(this).css("left","calc(50% - "+(Math.round(e(this).width()/2)-n)+"px)")}}),i(),l()},this.each(function(){s=this})}}(jQuery);