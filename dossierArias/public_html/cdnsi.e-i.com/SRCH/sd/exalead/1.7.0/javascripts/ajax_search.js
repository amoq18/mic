var SRCHAjaxIncluded=true;function AjaxCallToExalead(a,h,c,f){var g=c||"/fr/search_engine.html";var e=f||"/fr/SearchAjax.html";var b="pQuery";var d=10;a=a.trim();if(a){$.ajax({url:e,type:"GET",data:b+"="+encodeURIComponent(a),success:function(j,i){},error:function(k,i,j){},complete:function(o,j){if(j=="success"){var n=$.parseJSON(o.responseText);var m=(n.length>d)?d:n.length;var k="";if(m>0){k="<ul>"}for(var l=0;l<m;l++){k+='<li class="srch-search-link"><a href="'+g+"?"+b+"="+n[l]+"";if(window.eiesp!==undefined&&window.eiesp!=""){k+="&pSpace="+window.eiesp}k+='">'+n[l]+"</a></li>"}if(m>0){k+="</ul>"}$(h).html(k)}}})}}var delaySRCHSearch=(function(){var a=0;return function(c,b){clearTimeout(a);a=setTimeout(c,b)}})();$(document).ready(function(){var c=null;if(typeof getEspace!=="undefined"&&$.isFunction(getEspace)){c=getEspace()}if(c){window.eiesp=c;var a='<input type="hidden" name="pSpace" value="'+window.eiesp+'" />';$(".CMSD_search").append(a)}$(".CMSD_search").on("click",".srch-search-link a",function(g){try{g.preventDefault();var d=this.text;RechercheDirecteAjaxCall(d,this)}catch(f){document.location=this.href}});$(".pQuery").focus(function(){$(".autocomplete_search_top").show();return true});$(".pQuery").focusout(function(){window.setTimeout(function(){$(".autocomplete_search_top").hide()},500)});$(".CMSD_search").submit(function(h){try{h.preventDefault();var g=this;var d=this[name="pQuery"].value;RechercheDirecteAjaxCall(d,g)}catch(f){g.submit()}});if(typeof(srchConfig)!=="undefined"&&srchConfig.searchAjaxUrl&&srchConfig.formUrl){var b=["#SRCH_form_header","#SRCH_form_footer","#SRCH_form_mobile"];b.forEach(function(d){$(d+" .SRCH_input").keyup(function(g){var f=g.currentTarget.value;delaySRCHSearch(function(){AjaxCallToExalead(f,d+" .autocomplete_search",srchConfig.formUrl,srchConfig.searchAjaxUrl)},300)});$(d+" .SRCH_input").focus(function(){$(d+".autocomplete_search").show();return true});$(d+" .SRCH_input").focusout(function(){window.setTimeout(function(){$(d+".autocomplete_search").hide()},500)})})}});function RechercheDirecteAjaxCall(b,d){var c=true;var a=false;if(typeof(urlRedirect)!=="undefined"){a=urlRedirect}if(typeof(srchConfig)!=="undefined"&&srchConfig.redirectUrl){a=srchConfig.redirectUrl}if(!a||!b){if(typeof d=="function"){d()}else{if(d.tagName=="FORM"){d.submit()}else{if(d.tagName=="A"){document.location=d.href}}}return}$.ajax({url:a,type:"GET",data:"pQuery="+encodeURIComponent(b),success:function(f){var e=$.parseJSON(f);if(e&&e.url){c=false;RechercheDirecteStat(b);window.location=e.url}else{if(e&&e.js){c=false;RechercheDirecteStat(b);OuvrirEspaceConseiller(e.js)}}},error:function(){},complete:function(){if(c===false){return false}if(!d){return true}if(typeof d=="function"){d()}else{if(d.tagName=="FORM"){d.submit()}else{if(d.tagName=="A"){document.location=d.href}}}}})}function OuvrirEspaceConseiller(b){if(typeof EspaceConseiller!=="undefined"&&b){var a={};a.context="";a.tab=b;EspaceConseiller.OpenBlocConseiller(a)}}function RechercheDirecteStat(a){if(typeof(dataLayer)!="undefined"){dataLayer.push({event:"RechercheDirecte",eventCategory:"Recherche",eventAction:"Recherche directe",eventLabel:a})}};